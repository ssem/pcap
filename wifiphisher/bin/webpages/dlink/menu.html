var TabHeader="";
var SideItem="";
var HelpItem="";
var ModemVer="DSL-2640B";
var FirmwareVer="EU_3-06-06-3A00.A2pB022g2.d19d";
var dslStatus = "1";
//parent.fPanel2.getStatus();
var CHome = 1;
var CAdvanced = 2;
var CMaintain = 3;
var CStatus = 4;
var CHelp = 5;
var CEnd = 5;
var delaytimer=300;
var user = 'admin';
var proto = 'PPPoE';
var ipExt = '0';
var dhcpen = '1';
var std = 'annex_a';
var wireless = '1';
var voice = '';
var buildSnmp = '0';
var buildDdnsd = '1';
var buildSntp = '1';
var buildPureBridge = '0';
var buildPortmap = '1';
var buildipp = '0';
var buildSes = '';  //SUPPORT_SES
var siproxd = '1';
var tod = '1';
var QosEnabled = 'true';
var buildRip = '1';  //SUPPORT_SES
var buildUsbHost = '0';
var buildUsbFtp = '0';
var buildUsbSmb = '0';
var ipsec = '0';
var certificate = '0';
var wirelessqos = '1';
var tr69c = '0';
var buildPptpClient = '0';
var buildDOS = '1';
var buildPT = '1';
var buildQoS='1';
var urlFilter = '1';
var iptSchedule = '1';
var QuickSetup=0;
var VirtualServers=0;
var PortTriggering=0;
var DMZHost=0;
var ALG=0;
//var Outgoing=0;
//var Incoming=0;
var Filter=0;
var AttackPrevent=0;
var MACFiltering=0;
var ParentalControl=0;
var QualityofService=0;
var DefaultGateway=0;
var StaticRoute=0;
var RIP=0;
var Routing=0;
var DNSServer=0;
var DynamicDNS=0;
var Annex="";
var PortMapping=0;
var PPTPClient=0;
var IPSec=0;
var wlBasic=0;
var wlSecurity=0;
var wlMACFilter=0;
var wlBridge=0;
var wlAdvanced=0;
var wlQos=0;
var wlSES=0;
var wlStationInfo=0;
var WirelessAdv=0;
var MassStorage=0;
var PrintServer=0;
var Settings=0;
var SNMP=0;
var TR069Client=0;
var cert = 0;
var InternetTime=0;
//var Services=0;
//var IPAddresses=0;
//var Passwords=0;
var AccessControl=0;
var Security="";
var UpdateSoftware=0;
if ( user != 'admin' && user != 'user') {
if ( buildPureBridge == 0) {
VirtualServers=1;
if(buildPT == '1')
PortTriggering=1;
//add compile option
DMZHost=1;
if ( siproxd == '1' )
ALG =1;
//Outgoing=1;
//Incoming=1;
//MACFiltering=1;
Filter=1;
if (buildDOS == '1')
AttackPrevent=1;
if ( tod == '1' )
ParentalControl=1;
}
}
if ( buildPureBridge == 0) {
QuickSetup=1;
if ( user != 'user') {
if (buildQoS == '1')
QualityofService=1;
DefaultGateway=1;
//add compile option
StaticRoute=1;
Routing=1;
if ( buildRip == '1')
RIP=1;
//add compile option
DNSServer=1;
if ( buildDdnsd == '1')
DynamicDNS=1;
}
}
if ( std == 'annex_c' )
Annex="adslcfgc.html";
else
Annex="adslcfg.html";
if ( buildPortmap == '1' ) {
PortMapping=1;
}
if ( buildPptpClient == '1' ) {
PPTPClient=1;
}
if ( ipsec == '1' ) {
IPSec=1;
}
if (certificate == '1')  {
cert = 1;
}
if ( wireless == '1' ) {
wlBasic=1;
wlSecurity=1;
wlMACFilter=1;
wlBridge=1;
wlAdvanced=1;
WirelessAdv=1;
if (buildQoS == '1'){
if ( wirelessqos == '1' ) {
wlQos=1;
}
}
//SUPPORT_SES
if ( buildSes == '1' ) {
wlSES=1;
}
wlStationInfo=1;
}
if ( buildUsbHost == '1' ) {
if ( buildUsbFtp == '1' || buildUsbSmb == '1' ) {
MassStorage=1;
}
if ( buildipp == '1' ) {
PrintServer=1;
}
}
if ( user != 'user') {
Settings=1;
if ( buildSnmp == '1' )
SNMP=1;
if ( tr69c == '1' )
TR069Client=1;
if ( (buildPureBridge == '0') && (buildSntp == '1') )
InternetTime=1;
//Services=1;
//IPAddresses=1;
//Passwords=1;
AccessControl=1;
}
var HomeMenu=new Array();
var AdvMenu=new Array();
var MaintainMenu = new Array()
var StatMenu=new Array();
var HelpMenu=new Array();
var TabMenu = new Array()
var tabPos = GetTABpos();
HomeMenu[0 ]=new Gitem(CHome, "ADSL Setup", "wan.html", 1, "euhelp.html");
HomeMenu[1 ]=new Gitem(CHome, "Wireless Setup", "wirelesssetting.html", 1, "euhelp.html");
HomeMenu[2 ]=new Gitem(CHome, "LAN Setup",    "lan.html", 1, "euhelp.html");
HomeMenu[3 ]=new Gitem(CHome, "Time and Date",  "time.html", 1, "euhelp.html");
HomeMenu[4 ]=new Gitem(CHome, "Logout",  "logouth.html",    1, "");
//HomeMenu[6 ]=new Gitem(CHome, "Save and Reboot",  "rebootinfo.cgi",   1, "");
AdvMenu[0 ]=new Gitem(CAdvanced, "Port Forwarding", "portforwarding.html", 1, "advhelp.html");
AdvMenu[1 ]=new Gitem(CAdvanced, "QoS Setup",            "qos.html", 1, "advhelp.html");
AdvMenu[2 ]=new Gitem(CAdvanced, "Outbound Filter", "scoutflt.html", 1, "advhelp.html");
AdvMenu[3]=new Gitem(CAdvanced, "Inbound Filter",      "scinflt.html", 1, "advhelp.html");
//AdvMenu[5 ]=new Gitem(CAdvanced, "MAC Filtering",        "wlmacflt.html", 1, "advhelp.html");
//AdvMenu[5 ]=new Gitem(CAdvanced, "Time Restrictions",      "todmngr.tod?action=view", ParentalControl, "advhelp.html");
AdvMenu[4 ]=new Gitem(CAdvanced, "DNS Setup",    "dns.html", DNSServer, "advhelp.html");
AdvMenu[5 ]=new Gitem(CAdvanced, "VLAN",    "vlan.html", 1, "advhelp.html");
AdvMenu[6 ]=new Gitem(CAdvanced, "Firewall & DMZ",    "firewall.html", 1, "advhelp.html");
AdvMenu[7 ]=new Gitem(CAdvanced, "Advanced ADSL",        Annex, 1, "advhelp.html");
AdvMenu[8 ]=new Gitem(CAdvanced, "Advanced Wireless",        "wirelessadv.html", 1, "advhelp.html");
AdvMenu[9]=new Gitem(CAdvanced, "Wireless Mac Filter", "WlanMacFilter.html",    1, "advhelp.html");
AdvMenu[10 ]=new Gitem(CAdvanced, "Advanced LAN",        "lanadv.html", 1, "advhelp.html");
//AdvMenu[10]=new Gitem(CAdvanced, "Remote Management",          "access.html", AccessControl, "advhelp.html");
AdvMenu[11]=new Gitem(CAdvanced, "Remote Management",        "scsrvcntr.html", AccessControl, "advhelp.html");
AdvMenu[12]=new Gitem(CAdvanced, "Logout", "logouth.html",  1, "");
//AdvMenu[13]=new Gitem(CAdvanced, "Save and Reboot",        "rebootinfo.cgi", 1, "advhelp.html");
MaintainMenu[0 ]=new Gitem(CMaintain, "Password",   "password.html", 1, "mainhelp.html");
MaintainMenu[1 ]=new Gitem(CMaintain, "Save/Restore Settings", "updatesettings.html", 1, "mainhelp.html");
MaintainMenu[2 ]=new Gitem(CMaintain, "Firmware Update",    "upload.html", 1, "mainhelp.html");
MaintainMenu[3 ]=new Gitem(CMaintain, "Diagnostics",    "diagpppoe.html", 1, "mainhelp.html");
MaintainMenu[4 ]=new Gitem(CMaintain, "System Log",     "logintro.html", 1, "mainhelp.html");
//MaintainMenu[5 ]=new Gitem(CMaintain, "Schedule", "sciptsched.cmd", iptSchedule, "mainhelp.html");
MaintainMenu[5 ]=new Gitem(CMaintain, "Logout",  "logouth.html",    1, "");
StatMenu[0 ]=new Gitem(CStatus, "Device Info", "info.html", 1, "statushelp.html");
//StatMenu[1 ]=new Gitem(CStatus, "WAN Info", "wancfg.cmd?action=view", 1, "statushelp.html");
StatMenu[1 ]=new Gitem(CStatus, "Connected Clients",    "clients.html", wlStationInfo, "statushelp.html");
//StatMenu[2 ]=new Gitem(CStatus, "DHCP Clients", "dhcpinfo.html", 1, "statushelp.html");
//StatMenu[2 ]=new Gitem(CStatus, "Logs",   "logview.cmd", 1, "statushelp.html");
//StatMenu[5 ]=new Gitem(CStatus, "LAN",    "statsifc.html", 1, "statushelp.html");
//StatMenu[6 ]=new Gitem(CStatus,"WAN",     "statswan.cmd", 1, "statushelp.html");
//StatMenu[7 ]=new Gitem(CStatus, "ATM",    "statsatm.cmd", 1, "statushelp.html");
StatMenu[2 ]=new Gitem(CStatus, "Statistics",   "statsifcwan.html", 1, "statushelp.html");
//StatMenu[6 ]=new Gitem(CStatus, "ADSL",   "statsadsl.html", 1, "statushelp.html");
//StatMenu[3 ]=new Gitem(CStatus, "Route Info", "rtroutecfg.cmd?action=view", 1, "statushelp.html");
StatMenu[3 ]=new Gitem(CStatus, "Logout",  "logouth.html",  1, "");
HelpMenu[0 ]=new Gitem(CHelp, "Menu", "helpmenu.html", 1, "");
HelpMenu[1 ]=new Gitem(CHelp, "Setup", "helpbasic.html", 1, "");
HelpMenu[2 ]=new Gitem(CHelp, "Advanced", "helpadvanced.html", 1, "");
HelpMenu[3 ]=new Gitem(CHelp, "Maintenance", "helpmaintenance.html", 1, "");
HelpMenu[4 ]=new Gitem(CHelp, "Status", "helpstatus.html", 1, "");
var home=getDefaultPage(0); //'index.html';
var adv=getDefaultPage(1); //'scvrtsrv.cmd?action=view';
var maintenace=getDefaultPage(2);
var status=getDefaultPage(3);
var help=getDefaultPage(4);
TabMenu[0 ] =new Gtab("Setup", home);
TabMenu[1 ] =new Gtab("Advanced", adv); //"portmap.cmd");
TabMenu[2 ] =new Gtab("Maintenance", maintenace); //"upload.html");
TabMenu[3 ] =new Gtab("Status", status);
TabMenu[4 ] =new Gtab("Help", help);
function getDefaultPage(ID)
{
var sideMenu = HomeMenu;
if (ID == 1)
{
sideMenu = AdvMenu;
}
else if (ID == 2)
{
sideMenu = MaintainMenu;
}
else if (ID == 3)
{
sideMenu = StatMenu;
}
else if (ID == 4)
{
sideMenu = HelpMenu;
}
for(i=0;i < sideMenu.length;i++)
{
if (sideMenu[i].ishow == 1)
return sideMenu[i].surl;
}
}
function Gitem(ifolder,sname,surl,ishow,shelp)
{
this.ifolder=ifolder;
this.sname=sname;
this.surl=surl;
this.ishow=ishow;
this.shelp=shelp;
}
function Gtab(sname,surl)
{
this.sname=sname;
this.surl=surl;
}
function doLink(surl)
{
shref =""+surl;
document.location.href = shref;
}
function GetTABpos()
{
var tabOn = 0;
for(i=0; i < TabMenu.length; i++)
{
if (TabHeader == TabMenu[i].sname)
tabOn = i;
}
return tabOn;
}
function GetSidepos(menu)
{
var tabOn = 0;
for(i=0; i < menu.length; i++)
{
if (SideItem == menu[i].sname)
tabOn = i;
}
return tabOn;
}
function Write_Folder_Images()
{
var top1 = '<TD width=155 class=';
var top2 = '><a href="';
var top3 = '">';
var top4 = '</a></td>';
var result = "";
tabPos = GetTABpos();
for(i=0; i < TabMenu.length; i++)
{
if (tabPos == i)
result = result + top1 + 'topnavon' + top2 + TabMenu[i].surl + top3 + TabMenu[i].sname + top4;
else
result = result + top1 + 'topnavoff' + top2 + TabMenu[i].surl + top3 + TabMenu[i].sname + top4;
}
document.write(result);
}
function Write_Item_Images()
{
var sideMenu = HomeMenu;;
var top = '<TD id=sidenav_container><div id=sidenav><UL>';
var bottom1 = '</LI></UL></div>';
var bottom2 = '</td>';
var side1 = '<LI><div ';
var side2 = '><a href="';
var side3 = '">';
var side4 = '</a></div>';
var result = "";
if (tabPos == 0)
{
sideMenu = HomeMenu;
}
else if (tabPos == 1)
{
sideMenu = AdvMenu;
}
else if (tabPos == 2)
{
sideMenu = MaintainMenu;
}
else if (tabPos == 3)
{
sideMenu = StatMenu;
}
else if (tabPos == 4)
{
sideMenu = HelpMenu;
}
var g_FID= GetSidepos(sideMenu);
for(i=0;i < sideMenu.length;i++)
{
if ((g_FID == i)&&(sideMenu[i].ishow == 1))
result = result + side1 + 'class=sidenavoff' + side2 + sideMenu[i].surl + side3 + sideMenu[i].sname + side4;
else if (sideMenu[i].ishow == 1)
result = result + side1 + side2 + sideMenu[i].surl + side3 + sideMenu[i].sname + side4;
}
document.write(top);
document.write(result);
document.write(bottom1);
document.writeln("<table width=50% align=center><tr><td>");
document.writeln("<IMG alt='' src='Images/online.gif'></td><td><b><font color=#00FF00 size=2>Internet Online</font></b>");document.writeln("</td></tr></table>");
document.writeln("<p align=center>&nbsp;&nbsp;&nbsp;<input name= 'Reboot' type='button' onClick='btnReboot()' value='Reboot'></p>");document.write(bottom2);
}
function mainTableStart()
{
var tabPos;
document.write('<style>');
document.write('div.overflow');
document.write('{');
document.write('    overflow: auto;');
if (HelpItem != ""){
document.write('    width: 500px;');
} else {
document.write('    width: 630px;');
}
document.write('}');
document.write('</style>');
tabPos = GetTABpos();
if (tabPos == 4)
document.write('<div align=center style="display: hidden" id="tblmain">');
else
document.write('<div align=center style="display: none" id="tblmain">');
document.write('<table cellspacing=0 width="800"><tr><td>');
document.write('<TABLE id=header_container width="800"><tr>');
document.write('<td align=left width="400">Product: DSL-2640R</td>');
document.write('<td align=right width="400">Firmware Version: EU_1.06    Hardware Version: B1</td>');
document.write('</tr></table>');
}
function logo()
{
document.write('<table cellspacing=0 width="800"><tr><TD id=masthead_container width="800"><a href="http://www.dlink.com.tw/" target="_blank"><IMG border="0" alt="" src="./img_masthead.jpg"></a></td></tr></table>');
}
function TopNav()
{
document.write('<TABLE id=topnav_container border=0 width="800"><tr><TD id=modnum><IMG width=125 height=25 alt="" src="./Logo.gif"></td>');
Write_Folder_Images();
document.write('</tr></table>');
}
function ThirdRowStart()
{
document.write('<TABLE id=content_container cellspacing=0 summary="" border=0 width="800"><tr>');
}
//Frederick,070420 obtained from util.js
function do_checkstr(string)
{
var detect = navigator.userAgent.toLowerCase();
place = detect.indexOf(string) + 1;
thestring = string;
return place;
}
function doGetBrowserOS()
{
var detect = navigator.userAgent.toLowerCase();
var OS,browser,version,total,thestring, browseVer;
if (do_checkstr('konqueror'))
{
browser = "Konqueror";
OS = "Linux";
}
else if (do_checkstr('safari')) browser = "safa";
else if (do_checkstr('omniweb')) browser = "omni";
else if (do_checkstr('opera')) browser = "oper";
else if (do_checkstr('webtv')) browser = "webt";
else if (do_checkstr('icab')) browser = "icab";
else if (do_checkstr('msie')) browser = "msie";
//Frederick,060721  Add firefox detection
else if(navigator.userAgent.indexOf("Firefox")!=-1){
var versionindex=navigator.userAgent.indexOf("Firefox")+8
if (parseInt(navigator.userAgent.charAt(versionindex))>=1)
browser = "fire";
}
else if (!do_checkstr('compatible'))
{
browser = "nets"
}
else browser = "unknown";
if (browser != "unknown")
if (!OS)
{
if (do_checkstr('linux')) OS = "lin";
else if (do_checkstr('x11')) OS = "uni";
else if (do_checkstr('mac')) OS = "mac"
else if (do_checkstr('win')) OS = "win"
else OS = "unknown";
}
browseVer = browser + OS;
return browseVer;
}
function mainBodyStart()
{
document.write('<TD id=maincontent_container><table><tr><td>');
if (HelpItem != ""){
//document.write('<div id=maincontent style="width:539">');
//frederick,070420 this is ugly but it works :-D
var currBrowser;
currBrowser = doGetBrowserOS();
switch(currBrowser)
{
case "msiewin": //ie windows
case "msiemac": //ie mac
case "netslin": //mozilla linux
document.write('<div id=maincontent style="width:690">');
case "netswin": //netscape windows
case "firelin": //firefox linux
case "firewin": //firefox windows
case "firemac": //firefox mac
document.write('<div id=maincontent style="width:686">');
break;
default:
document.write('<div id=maincontent style="width:687">');
break;
}
} else {
document.write('<div id=maincontent style="width:790">');
}
}
function mainBodyEnd()
{
document.write('</div>');
document.write('</td></tr></table></td>');
}
function ThirdRowEnd()
{
var sideMenu;
if (tabPos == 0)
{
sideMenu = HomeMenu;
}
else if (tabPos == 1)
{
sideMenu = AdvMenu;
}
else if (tabPos == 2)
{
sideMenu = MaintainMenu;
}
else if (tabPos == 3)
{
sideMenu = StatMenu;
}
else if (tabPos == 4)
{
sideMenu = HelpMenu;
}
var g_FID= GetSidepos(sideMenu);
if (HelpItem != ""){
document.write('<TD id=sidehelp_container>');
document.write('<div id=help_text>');
document.write('<LABEL id="helpLabel"></label>');
document.write('<script language=Javascript src="' + sideMenu[g_FID].shelp + '"></script>');
document.write('</div>');
document.write('</td>');
}
document.write('</tr></table>');
}
function Footer()
{
document.write('<TABLE id=footer_container cellspacing=0 border=0><tr><TD id=leftimage>');
//document.write('<IMG height=35 alt="" src="../Images/img_bottom.gif" width=114></td>');
document.write('<td>&nbsp;</td></tr></table>');
}
function mainTableEnd()
{
document.write('</td></tr></table><div id=copyright>Copyright &copy; 2007 D-Link System, Inc.</div></div>');
setTimeout("document.getElementById('tblmain').style.display = 'block'", delaytimer);
}
function btnReboot(){
var code = 'location="reboot.html"';
eval(code);
}
